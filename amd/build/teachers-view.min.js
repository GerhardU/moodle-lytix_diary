define("lytix_diary/teachers-view",["exports","lytix_helper/widget","core/templates"],(function(_exports,_widget,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_widget=_interopRequireDefault(_widget),_templates=_interopRequireDefault(_templates);_exports.init=function(contextid,userid,courseid,locale){var wsData=_widget.default.getData("local_lytix_lytix_diary_history",{contextid:contextid,courseid:courseid});locale=_widget.default.convertLocale(locale),Promise.resolve(wsData).then((function(data){for(var counts=data.Counts,length=counts.length,context={bars:Array(length),counts:Array(length),months:Array(length)},highestCount=0,i=0;i<length;++i){var currentCount=context.counts[i]=counts[i];currentCount>highestCount&&(highestCount=currentCount)}for(var monthIndex=data.Start-1,month=new Date(2022,monthIndex),format=new Intl.DateTimeFormat(locale,{month:"short"}).format,_i=length-1;_i>=0;--_i)context.bars[_i]=counts[_i]/highestCount*100,context.months[_i]=format(month),month.setMonth(++monthIndex%12);return context.months.shift(),_templates.default.render("lytix_diary/teachers-view",context)})).then((function(html){_widget.default.getContentContainer("diary").insertAdjacentHTML("beforeend",html)})).finally((function(){document.getElementById("diary").classList.remove("loading")})).catch((function(error){_widget.default.handleError(error,"diary")}))}}));

//# sourceMappingURL=teachers-view.min.js.map