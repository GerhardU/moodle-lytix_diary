define("lytix_diary/teachers-view",["exports","lytix_helper/widget","core/templates"],(function(_exports,_widget,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_widget=_interopRequireDefault(_widget),_templates=_interopRequireDefault(_templates);_exports.init=(contextid,userid,courseid,locale)=>{const wsData=_widget.default.getData("local_lytix_lytix_diary_history",{contextid:contextid,courseid:courseid});locale=_widget.default.convertLocale(locale),Promise.resolve(wsData).then((data=>{const counts=data.Counts,length=counts.length,context={bars:Array(length),counts:Array(length),months:Array(length)};let highestCount=0;for(let i=0;i<length;++i){const currentCount=context.counts[i]=counts[i];currentCount>highestCount&&(highestCount=currentCount)}let monthIndex=data.Start-1;const month=new Date(2022,monthIndex),format=new Intl.DateTimeFormat(locale,{month:"short"}).format;for(let i=length-1;i>=0;--i)context.bars[i]=counts[i]/highestCount*100,context.months[i]=format(month),month.setMonth(++monthIndex%12);return context.months.shift(),_templates.default.render("lytix_diary/teachers-view",context)})).then((html=>{_widget.default.getContentContainer("diary").insertAdjacentHTML("beforeend",html)})).finally((()=>{document.getElementById("diary").classList.remove("loading")})).catch((error=>{_widget.default.handleError(error,"diary")}))}}));

//# sourceMappingURL=teachers-view.min.js.map